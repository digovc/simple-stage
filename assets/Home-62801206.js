import{_ as D,f as r,c,h as P,d as m,a,t as y,r as v,u as h,i as B,o as N,b as l,e as i,F as j,j as O,k as g,g as p,w as b,v as S,l as E,m as I}from"./index-bfed1039.js";import{p as x}from"./playlist.repository-96d101bd.js";import{S as L,m as U,_ as R}from"./music.repository-3056144a.js";import{t as F,_ as T}from"./Dialog.vue_vue_type_script_setup_true_lang-55bffc4e.js";import{_ as $}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-90ce98a9.js";import{_ as M}from"./DangerButton.vue_vue_type_script_setup_true_lang-23fb6551.js";const H={},J={class:"p-2 border rounded cursor-pointer hover:shadow text-sm"};function q(d,s){return r(),c("div",J,[P(d.$slots,"default")])}const V=D(H,[["render",q]]),z={class:"space-y-4"},G={class:"text-2xl"},K={class:"grid grid-cols-4 gap-4"},A=m({__name:"List",props:{title:{type:String,required:!0}},setup(d){return(s,o)=>(r(),c("div",z,[a("div",G,y(d.title),1),a("div",K,[P(s.$slots,"default")])]))}}),Q=m({__name:"Playlists",setup(d){const s=v([]),o=new L,u=h(),_=()=>{x.onCreated$.pipe(F(o)).subscribe(e=>{s.value.push(e)})},n=e=>{const t=e==null?void 0:e.id;t&&u.push(`/playlist/${t}`)};return B(()=>{o.next(),o.complete()}),N(async()=>{s.value=x.getAll(),_()}),(e,t)=>(r(),c("div",null,[l(A,{title:"Playlists"},{default:i(()=>[(r(!0),c(j,null,O(s.value,f=>(r(),g(V,{key:f.id,onClick:C=>n(f)},{default:i(()=>[p(y(f.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]))}}),W={},X={class:"flex"},Y=a("div",{class:"border rounded-full py-2 px-4 inline w-96 focus-within:shadow"},[a("input",{type:"text",placeholder:"Search",class:"w-full outline-none"})],-1),Z=[Y];function ee(d,s){return r(),c("div",X,Z)}const te=D(W,[["render",ee]]),se=m({__name:"Songs",setup(d){const s=v([]),o=h(),u=_=>{o.push(`/render/${_.id}`)};return N(async()=>{s.value=U.getAll()}),(_,n)=>(r(),c("div",null,[l(A,{title:"Songs"},{default:i(()=>[(r(!0),c(j,null,O(s.value,e=>(r(),g(V,{key:e.id,onClick:t=>u(e)},{default:i(()=>[p(y(e.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]))}}),oe={class:"space-y-8"},ae=a("div",null," New playlist ",-1),ne={class:"flex flex-col space-y-2"},le={class:"flex justify-end space-x-2"},re=m({__name:"PlaylistForm",emits:{onClose:()=>!0},setup(d,{emit:s}){const o=v(""),u=v(""),_=()=>{const n={id:"",title:o.value,tags:u.value.split(",").map(e=>e.trim()).filter(e=>e),musicIds:[]};x.save(n),s("onClose")};return(n,e)=>(r(),c("div",null,[l(T,null,{default:i(()=>[a("div",oe,[ae,a("div",ne,[b(a("input",{type:"text",class:"w-96 border border-gray-300 rounded-md p-2",placeholder:"Playlist name","onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t)},null,512),[[S,o.value]]),b(a("input",{type:"text",class:"w-96 border border-gray-300 rounded-md p-2",placeholder:"Tags","onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t)},null,512),[[S,u.value]])]),a("div",le,[l($,{onClick:_},{default:i(()=>[p(" Create ")]),_:1}),l(R,{onClick:e[2]||(e[2]=t=>s("onClose"))},{default:i(()=>[p(" Cancel ")]),_:1})])])]),_:1})]))}}),ie={class:"space-x-2"},ce=m({__name:"HomeMenu",setup(d){const s=h(),o=v(!1),u=()=>{const n=JSON.stringify(localStorage),e=new Blob([n],{type:"text/plain"}),t=document.createElement("a");t.download="simple-stage-data.txt",t.href=window.URL.createObjectURL(e),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.click()},_=()=>{const n=document.createElement("input");n.type="file",n.accept="text/plain",n.onchange=()=>{var f;const e=(f=n.files)==null?void 0:f[0];if(!e)return;const t=new FileReader;t.onload=()=>{const C=t.result,w=JSON.parse(C);Object.keys(w).forEach(k=>{localStorage.setItem(k,w[k])}),window.location.reload()},t.readAsText(e)},n.click()};return(n,e)=>(r(),c("div",null,[a("div",ie,[l($,{onClick:e[0]||(e[0]=t=>E(s).push("/editor"))},{default:i(()=>[p(" Create a song ")]),_:1}),l($,{onClick:e[1]||(e[1]=t=>o.value=!0)},{default:i(()=>[p(" Create a playlist ")]),_:1}),l(R,{onClick:u},{default:i(()=>[p(" Export all data ")]),_:1}),l(M,{onClick:_},{default:i(()=>[p(" Import all data ")]),_:1})]),a("div",null,[o.value?(r(),g(re,{key:0,onOnClose:e[2]||(e[2]=t=>o.value=!1)})):I("",!0)])]))}}),de={class:"h-full flex flex-col space-y-8 p-4"},ue=a("div",{class:"text-5xl"}," Simple Stage ",-1),_e={class:"space-y-12"},ye=m({__name:"Home",setup(d){return(s,o)=>(r(),c("div",de,[ue,a("div",null,[l(ce)]),a("div",_e,[l(te),l(Q),l(se)])]))}});export{ye as default};
